(function(e){function t(t){for(var r,s,o=t[0],a=t[1],l=t[2],c=0,v=[];c<o.length;c++)s=o[c],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&v.push(i[s][0]),i[s]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);d&&d(t);while(v.length)v.shift()();return u.push.apply(u,l||[]),n()}function n(){for(var e,t=0;t<u.length;t++){for(var n=u[t],r=!0,o=1;o<n.length;o++){var a=n[o];0!==i[a]&&(r=!1)}r&&(u.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},i={app:0},u=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],a=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var d=a;u.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r,i,u=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("h1",[e._v("Quiz")]),n("div",{directives:[{name:"show",rawName:"v-show",value:-1===e.currentQuestion,expression:"currentQuestion === -1"}]},[e._l(e.leadFields,(function(e){return n("div",{key:e.key},[n("Field",{attrs:{field:e}})],1)})),n("div",{directives:[{name:"show",rawName:"v-show",value:e.completedLeadFields&&e.validatedLeadFields,expression:"completedLeadFields && validatedLeadFields"}]},[n("button",{on:{click:e.startQuiz}},[e._v(e._s(e.i18n.start_quiz))])])],2),n("div",{directives:[{name:"show",rawName:"v-show",value:e.completedLeadFields&&e.currentQuestion>=0,expression:"completedLeadFields && currentQuestion >= 0"}]},e._l(e.questions,(function(e,t){return n("Question",{key:t,attrs:{index:t,title:e.title,answers:e.answers}})})),1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.currentQuestion===e.questions.length,expression:"currentQuestion === questions.length"}]},[e.sendQuizTo?["idle"===e.sendQuizStatus?n("button",{on:{click:e.sendQuiz}},[e._v(e._s(e.i18n.view_results))]):e._e(),"processing"===e.sendQuizStatus?n("div",[e._v(e._s(e.i18n.processing))]):e._e(),"success"===e.sendQuizStatus?n("div",[n("p",[e._v("Score: "+e._s(e.score))])]):e._e(),"error"===e.sendQuizStatus?n("div",[n("p",[e._v("An error occurred, please try again later.")]),n("button",{on:{click:e.sendQuiz}},[e._v("Retry")])]):e._e()]:[n("p",[e._v("Score: "+e._s(e.score))])]],2)])},o=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.index===e.currentQuestion,expression:"index === currentQuestion"}]},[e._v(" "+e._s(e.title)+" "),n("ul",e._l(e.answers,(function(t,r){return n("li",{key:r},[n("Answer",{attrs:{name:"q_"+e.index,id:"q_"+e.index+"_"+r,title:t.title},on:{change:function(t){return e.handleChange(e.index,r)}}})],1)})),0)])},l=[],d=(n("a9e3"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("input",{attrs:{type:"radio",name:e.name,id:e.id},on:{change:function(t){return e.$emit("change")}}}),n("label",{attrs:{for:e.id}},[e._v(e._s(e.title))])])}),c=[],v={props:{name:{type:String,required:!0},id:{type:String,required:!0},title:{type:String,required:!0}}},f=v,p=n("2877"),_=Object(p["a"])(f,d,c,!1,null,null,null),m=_.exports,h={components:{Answer:m},props:{index:{type:Number,required:!0},title:{type:String,required:!0},answers:{type:Array,required:!0}},computed:{currentQuestion:function(){return this.$store.getters["quiz/currentQuestion"]}},methods:{handleChange:function(e,t){this.$store.dispatch("quiz/selectAnswer",{question:e,answer:t}),this.$store.dispatch("quiz/nextQuestion")}}},S=h,w=Object(p["a"])(S,a,l,!1,null,null,null),T=w.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("label",[e._v(e._s(e.field.label))]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{type:"text",name:e.field.key},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}})])},E=[],Q={props:{field:{type:Object,required:!0}},computed:{value:{get:function(){var e;return(null===(e=this.field)||void 0===e?void 0:e.value)||""},set:function(e){this.$store.dispatch("quiz/updateLeadField",{key:this.field.key,value:e,valid:this.isValid(e)})}}},methods:{isValid:function(e){return!!e}}},z=Q,y=Object(p["a"])(z,g,E,!1,null,null,null),q=y.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("label",[e._v(e._s(e.field.label))]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{type:"email",name:e.field.key},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}})])},x=[],A=(n("ac1f"),n("466d"),{props:{field:{type:Object,required:!0}},computed:{value:{get:function(){var e;return(null===(e=this.field)||void 0===e?void 0:e.value)||""},set:function(e){this.$store.dispatch("quiz/updateLeadField",{key:this.field.key,value:e,valid:this.isValid(e)})}}},methods:{isValid:function(e){return!!e&&e.match(/^[^@ \t\r\n]+@[^@ \t\r\n]+\.[^@ \t\r\n]+$/)}}}),F=A,O=Object(p["a"])(F,b,x,!1,null,null,null),k=O.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("label",[e._v(e._s(e.field.label))]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{name:e.field.key},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.value=t.target.multiple?n:n[0]}}},e._l(e.field.options,(function(t,r){return n("option",{key:r},[e._v(e._s(t))])})),0)])},L=[],U={props:{field:{type:Object,required:!0}},computed:{value:{get:function(){var e;return(null===(e=this.field)||void 0===e?void 0:e.value)||this.field.options[0]},set:function(e){this.$store.dispatch("quiz/updateLeadField",{key:this.field.key,value:e,valid:this.isValid(e)})}}},methods:{isValid:function(e){return!!e}}},N=U,R=Object(p["a"])(N,$,L,!1,null,null,null),j=R.exports,D={functional:!0,render:function(e,t){var n={text:q,email:k,select:j};return e(n[t.props.field.type],t.data)}},I=D,P=Object(p["a"])(I,r,i,!1,null,null,null),V=P.exports,Z={name:"App",components:{Field:V,Question:T},computed:{i18n:function(){return this.$store.getters["quiz/i18n"]},leadFields:function(){return this.$store.getters["quiz/leadFields"]},questions:function(){return this.$store.getters["quiz/questions"]},score:function(){return this.$store.getters["quiz/score"]},currentQuestion:function(){return this.$store.getters["quiz/currentQuestion"]},completedLeadFields:function(){return this.$store.getters["quiz/completedLeadFields"]},validatedLeadFields:function(){return this.$store.getters["quiz/validatedLeadFields"]},sendQuizTo:function(){return this.$store.getters["quiz/sendQuizTo"]},sendQuizStatus:function(){return this.$store.getters["quiz/sendQuizStatus"]}},methods:{startQuiz:function(){this.$store.dispatch("quiz/nextQuestion")},sendQuiz:function(){this.$store.dispatch("quiz/sendQuiz")}}},C=Z,M=(n("5c0b"),Object(p["a"])(C,s,o,!1,null,null,null)),J=M.exports,W=n("2f62"),B=n("1da1"),G=(n("96cf"),n("7db0"),n("d81d"),n("bc3a")),H=n.n(G),K={namespaced:!0,state:{url:"",sendQuizTo:null,sendQuizStatus:"idle",i18n:{start_quiz:"Start Quiz",view_results:"View Results"},data:{leadFields:[],questions:[]},selectedAnswers:[],currentQuestion:-1,status:"idle",error:""},getters:{status:function(e){return e.status},error:function(e){return e.error},questions:function(e){return e.data.questions},i18n:function(e){return e.i18n},sendQuizTo:function(e){return e.sendQuizTo},sendQuizStatus:function(e){return e.sendQuizStatus},leadFields:function(e){return e.data.leadFields},completedLeadFields:function(e){return!e.data.leadFields.find((function(e){return!e.value}))},validatedLeadFields:function(e){return!e.data.leadFields.find((function(e){return!e.valid}))},currentQuestion:function(e){return e.currentQuestion},score:function(e,t){return e.selectedAnswers.reduce((function(e,n){var r=n.question,i=n.answer;return e+t.questions[r].answers[i].value}),0)}},actions:{fetch:function(e){return Object(B["a"])(regeneratorRuntime.mark((function t(){var n,r,i,u,s,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,r=e.commit,r("SET_STATUS","processing"),t.prev=2,t.next=5,H.a.get(n.url);case 5:i=t.sent,u=i.data,r("SET_DATA",u),r("SET_I18N",u.i18n),r("SET_SEND_QUIZ_TO",u.sendQuizTo),r("SET_STATUS","success"),t.next=18;break;case 13:t.prev=13,t.t0=t["catch"](2),a=(null===t.t0||void 0===t.t0||null===(s=t.t0.response)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.error)||"Unknown error",r("SET_STATUS","error"),r("SET_ERROR",a);case 18:case"end":return t.stop()}}),t,null,[[2,13]])})))()},selectAnswer:function(e,t){var n=e.commit;n("SET_SELECTED_ANSWER",t)},nextQuestion:function(e){var t=e.commit,n=e.getters;t("SET_QUESTION",n.currentQuestion+1)},updateLeadField:function(e,t){var n=e.commit;n("UPDATE_LEAD_FIELD_VALUE",t)},sendQuiz:function(e){return Object(B["a"])(regeneratorRuntime.mark((function t(){var n,r,i,u,s,o,a,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=e.state,i=e.getters,n("SET_SEND_QUIZ_STATUS","processing"),t.prev=2,t.next=5,H.a.post(r.sendQuizTo,{leadFields:r.data.leadFields.map((function(e){return{key:e.key,value:e.value}})),score:i.score,selectedAnswers:r.selectedAnswers});case 5:u=t.sent,s=u.data,s.redirectTo?window.location=s.redirectTo:(console.log(s),n("SET_SEND_QUIZ_STATUS","success")),t.next=16;break;case 10:t.prev=10,t.t0=t["catch"](2),console.log(t.t0),l=(null===t.t0||void 0===t.t0||null===(o=t.t0.response)||void 0===o||null===(a=o.data)||void 0===a?void 0:a.error)||"Unknown error",n("SET_SEND_QUIZ_STATUS","error"),n("SET_SEND_QUIZ_ERROR",l);case 16:case"end":return t.stop()}}),t,null,[[2,10]])})))()}},mutations:{SET_URL:function(e,t){e.url=t},SET_I18N:function(e,t){e.i18n=t},SET_SEND_QUIZ_TO:function(e,t){e.sendQuizTo=t},SET_DATA:function(e,t){e.data={questions:t.questions,leadFields:t.leadFields.map((function(e){return e.value="",e.valid=!1,"select"===e.type&&(e.value=e.options[0],e.valid=!0),e}))}},SET_SELECTED_ANSWER:function(e,t){var n=t.question,r=t.answer,i=e.selectedAnswers.find((function(e){return e.question===n}));i?e.selectedAnswers=e.selectedAnswers.map((function(e){return e.question===n&&(e.answer=r),e})):e.selectedAnswers.push({question:n,answer:r})},SET_QUESTION:function(e,t){e.currentQuestion=t},SET_STATUS:function(e,t){e.status=t},SET_ERROR:function(e,t){e.error=t},SET_SEND_QUIZ_STATUS:function(e,t){e.sendQuizStatus=t},SET_SEND_QUIZ_ERROR:function(e,t){e.sendQuizError=t},UPDATE_LEAD_FIELD_VALUE:function(e,t){var n=t.key,r=t.value,i=t.valid;e.data.leadFields=e.data.leadFields.map((function(e){return e.key===n&&(e.value=r,e.valid=i),e}))}}};u["a"].use(W["a"]);var X=new W["a"].Store({modules:{quiz:K}}),Y=X;u["a"].config.productionTip=!1,new u["a"]({store:Y,render:function(e){return e(J)},created:function(){var e=document.getElementById("quizzme");this.$store.commit("quiz/SET_URL",e.getAttribute("data-quiz-url")),this.$store.dispatch("quiz/fetch")}}).$mount("#quizzme")},"5c0b":function(e,t,n){"use strict";n("9c0c")},"9c0c":function(e,t,n){}});
//# sourceMappingURL=app.js.map